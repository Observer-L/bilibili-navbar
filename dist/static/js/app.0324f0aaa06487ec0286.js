webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("7+uW"),n=i("mvHQ"),s=i.n(n),r=i("c/Tr"),a=i.n(r),l={props:{floors:{type:Array}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bili-wrapper"},t._l(t.floors,function(e,o){return i("div",{staticClass:"floor",attrs:{id:e.id}},[i("h1",[t._v(t._s(e.name))])])}))},staticRenderFns:[]};var d=i("VU/8")(l,c,!1,function(t){i("iY/w")},"data-v-6d1b95e2",null).exports,u=i("//Fk"),f=i.n(u);window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var m=function(t,e,i,o){return i*((t=t/o-1)*t*t+1)+e},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,i=window.pageYOffset||document.documentElement.scrollTop,o=t-i,n=e,s=null;return new f.a(function(r,a){window.requestAnimationFrame(function a(l){null===s&&(s=l);var c=l-s;if(c<e){var d=m(c,i,o,n);document.body.scrollTop=d,document.documentElement.scrollTop=d,window.requestAnimationFrame(a)}else document.body.scrollTop=t,document.documentElement.scrollTop=t,r(t)})})},p={mixins:[{methods:{scrollToTop:function(t){return v(0,t="number"==typeof t?t:800)},scrollToElem:function(t,e,i){var o=t.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);return v(o-(i||0),e)},scrollTo:v}}],props:{options:{type:Object},isSort:{type:Boolean}},data:function(){return{current:-1,floorData:[],scrollTop:0,navbarOffsetTop:200,time:500,isDrag:!1,dragId:0,offsetY:0,y:0,height:32}},methods:{init:function(){this.initData(),document.addEventListener("scroll",this.scroll)},initData:function(){var t=this;this.floorData=a()(this.options.items,function(e){var i=document.getElementById(e.id);if(i){var o=t.getOffsetTop(i);return{name:e.name,element:i,offsetTop:o}}console.error("找不到楼层 "+e.id+" ")})},bindEvent:function(){document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("mouseleave",this.dragEnd)},unbindEvent:function(){document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("mouseleave",this.dragEnd)},getOffsetTop:function(t){var e,i=void 0,o=document.documentElement,n=document.body;return i=void 0!==t.getBoundingClientRect?t.getBoundingClientRect().top:0,e=o.clientTop||n.clientTop||0,i+(window.pageYOffset||o.scrollTop)-e},scroll:function(t){this.scrollTop=window.pageYOffset||document.documentElement.scrollTop+document.body.scrollTop;for(var e=0;e<this.floorData.length;e++)this.scrollTop>=this.floorData[e].offsetTop-this.offset?this.current=e:this.scrollTop<this.floorData[0].offsetTop-this.offset&&(this.current=-1),this.scrollTop>=this.offset?this.navbarOffsetTop=100:this.navbarOffsetTop=200},scrollToFloor:function(t){if(t!==this.current){this.current=t;var e=this.floorData[t].element;this.scrollToElem(e,this.time,this.offset||0)}},activeSort:function(){!0===this.isSort?this.unbindEvent():this.bindEvent(),this.$emit("toggleMask",!this.isSort)},startDrag:function(t,e){this.isSort&&(this.isDrag=!0,this.current=e,this.dragId=e,this.offsetY=t.offsetY,this.getPos(t))},dragMove:function(t){return t.preventDefault(),!0===this.isDrag&&this.getPos(t)},dragEnd:function(){this.isDrag&&(this.isDrag=!1,this.replaceItem!==this.dragId?this.options.items.splice(this.replaceItem,0,this.options.items.splice(this.dragId,1)[0]):this.scrollToFloor(this.dragId))},getPos:function(t){this.y=t.clientY-this.navbarOffsetTop-this.offsetY}},computed:{offset:function(){return this.options.offset||100},dragStyles:function(){return{top:this.y+"px"}},replaceItem:function(){var t=Math.floor(this.y/this.height);return t>this.floorData.length-1&&(t=this.floorData.length),t<0&&(t=0),t}},mounted:function(){this.init()},beforeDestroy:function(){document.removeEventListener("scroll",this.scroll),this.unbindEvent()},watch:{options:{deep:!0,handler:function(t,e){this.initData()}}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"navbar",class:{"edit-state":t.isSort},style:{top:t.navbarOffsetTop+"px"}},[i("div",{staticClass:"nav-bg",class:{open:t.isSort}},[i("div",{staticClass:"tips-img"})]),t._v(" "),i("div",{ref:"list",staticClass:"navbar-list"},[t._l(t.floorData,function(e,o){return[t.isDrag&&o===t.replaceItem&&t.replaceItem<=t.dragId?i("div",{staticClass:"navbar-item sortable"}):t._e(),t._v(" "),i("div",{staticClass:"navbar-item sotrable",class:[{on:t.current===o&&!t.isSort},{drag:t.isDrag&&t.current===o}],style:t.dragStyles,on:{click:function(e){t.scrollToFloor(o)},mousedown:function(e){t.startDrag(e,o)}}},[t._v(t._s(e.name))]),t._v(" "),t.isDrag&&o===t.replaceItem&&t.replaceItem>t.dragId?i("div",{staticClass:"navbar-item sortable"}):t._e()]}),t._v(" "),i("div",{staticClass:"navbar-item customize",on:{click:t.activeSort}},[i("div",[t._v("↑↓")]),t._v("\n      排序\n    ")])],2),t._v(" "),i("div",{staticClass:"s-line"}),t._v(" "),i("div",{staticClass:"back-top",on:{click:function(e){t.scrollToTop(t.time)}}},[t._v("↑")])])},staticRenderFns:[]};var g={name:"App",components:{Floor:d,NavBar:i("VU/8")(p,h,!1,function(t){i("zlJP")},"data-v-e389f93c",null).exports},data:function(){return{isSort:!1,floors:[{name:"直播",id:"bili_live",sortindex:0},{name:"动画",id:"bili_douga",sortindex:1},{name:"番剧",id:"bili_bangumi",sortindex:2},{name:"国创",id:"bili_guochuang",sortindex:3},{name:"音乐",id:"bili_music",sortindex:4},{name:"音频",id:"bili_audio",sortindex:5},{name:"舞蹈",id:"bili_dance",sortindex:6},{name:"游戏",id:"bili_game",sortindex:7},{name:"科技",id:"bili_technology",sortindex:8},{name:"生活",id:"bili_life",sortindex:9},{name:"鬼畜",id:"bili_kichiku",sortindex:10},{name:"时尚",id:"bili_fashion",sortindex:11},{name:"广告",id:"bili_ad",sortindex:12},{name:"娱乐",id:"bili_ent",sortindex:13},{name:"电影",id:"bili_movie",sortindex:14},{name:"TV剧",id:"bili_teleplay",sortindex:15},{name:"影视",id:"bili_cinephile",sortindex:16},{name:"纪录片",id:"bili_documentary",sortindex:17}]}},computed:{options:function(){var t={offset:200,offsetTop:0,items:this.floors};return t}},methods:{toggleMask:function(t){this.isSort=t}},watch:{floors:function(t){var e=a()(t,function(t){return t.sortindex});localStorage.nav=s()(e)}},mounted:function(){var t=this,e=localStorage.nav;if(e){e=JSON.parse(e);var i=[];a()(e,function(e){i.push(t.floors[e])}),this.floors=i}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"header"}),t._v(" "),i("Floor",{attrs:{floors:t.floors}}),t._v(" "),i("NavBar",{attrs:{options:t.options,isSort:t.isSort},on:{toggleMask:t.toggleMask}}),t._v(" "),i("div",{staticClass:"footer"}),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.isSort?i("div",{staticClass:"mask",on:{click:function(e){t.toggleMask(!1)}}}):t._e()])],1)},staticRenderFns:[]};var _=i("VU/8")(g,b,!1,function(t){i("Wyc7")},null,null).exports;o.a.config.productionTip=!1,new o.a({el:"#app",components:{App:_},template:"<App/>"})},Wyc7:function(t,e){},"iY/w":function(t,e){},zlJP:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0324f0aaa06487ec0286.js.map